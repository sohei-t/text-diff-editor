<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="インタラクティブな株価推移表示アプリケーション">
    <title>Stock Price Tracker - Interactive Chart</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1/dist/chartjs-plugin-zoom.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hammerjs@2.0.8/hammer.min.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <h1 class="logo">
                <svg class="logo-icon" width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                    <path d="M4 24L10 18L16 22L28 10" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                    <circle cx="10" cy="18" r="2" fill="currentColor"/>
                    <circle cx="16" cy="22" r="2" fill="currentColor"/>
                    <circle cx="28" cy="10" r="2" fill="currentColor"/>
                </svg>
                Stock Price Tracker
            </h1>
            <button
                class="theme-toggle"
                id="themeToggle"
                aria-label="ダークモード切替"
                title="テーマを切り替える">
                <svg class="sun-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                    <circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="2"/>
                    <line x1="12" y1="1" x2="12" y2="3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <line x1="12" y1="21" x2="12" y2="23" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <line x1="1" y1="12" x2="3" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <line x1="21" y1="12" x2="23" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <svg class="moon-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Control Panel -->
            <section class="control-panel" role="region" aria-label="チャート設定">
                <div class="control-group">
                    <label for="stockSelect" class="control-label">銘柄選択</label>
                    <div class="stock-selector">
                        <div class="checkbox-group" id="stockCheckboxes">
                            <label class="checkbox-label">
                                <input type="checkbox" value="AAPL" checked data-color="#4F46E5">
                                <span class="checkbox-custom"></span>
                                <span class="stock-name">Apple (AAPL)</span>
                                <span class="color-indicator" style="background-color: #4F46E5;"></span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="GOOGL" data-color="#10B981">
                                <span class="checkbox-custom"></span>
                                <span class="stock-name">Google (GOOGL)</span>
                                <span class="color-indicator" style="background-color: #10B981;"></span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="MSFT" data-color="#F59E0B">
                                <span class="checkbox-custom"></span>
                                <span class="stock-name">Microsoft (MSFT)</span>
                                <span class="color-indicator" style="background-color: #F59E0B;"></span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="AMZN" data-color="#EF4444">
                                <span class="checkbox-custom"></span>
                                <span class="stock-name">Amazon (AMZN)</span>
                                <span class="color-indicator" style="background-color: #EF4444;"></span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="TSLA" data-color="#8B5CF6">
                                <span class="checkbox-custom"></span>
                                <span class="stock-name">Tesla (TSLA)</span>
                                <span class="color-indicator" style="background-color: #8B5CF6;"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label">期間選択</label>
                    <div class="period-buttons" role="group" aria-label="期間選択">
                        <button class="period-btn" data-period="1D">1日</button>
                        <button class="period-btn active" data-period="1W">1週間</button>
                        <button class="period-btn" data-period="1M">1ヶ月</button>
                        <button class="period-btn" data-period="3M">3ヶ月</button>
                        <button class="period-btn" data-period="6M">6ヶ月</button>
                        <button class="period-btn" data-period="1Y">1年</button>
                        <button class="period-btn" data-period="ALL">全期間</button>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label">チャート操作</label>
                    <div class="chart-controls">
                        <button class="control-btn" id="resetZoom" aria-label="ズームをリセット">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            リセット
                        </button>
                        <button class="control-btn" id="refreshData" aria-label="データを更新">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M23 4v6h-6M1 20v-6h6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            更新
                        </button>
                        <label class="toggle-label">
                            <input type="checkbox" id="autoRefresh" checked>
                            <span class="toggle-slider"></span>
                            <span>自動更新</span>
                        </label>
                    </div>
                </div>
            </section>

            <!-- Stats Cards -->
            <section class="stats-section" id="statsCards" role="region" aria-label="統計情報">
                <!-- Stats cards will be dynamically generated -->
            </section>

            <!-- Chart Container -->
            <section class="chart-section" role="region" aria-label="株価チャート">
                <div class="chart-header">
                    <h2 class="chart-title">株価推移</h2>
                    <div class="chart-info">
                        <span class="update-time" id="lastUpdate" aria-live="polite">最終更新: --:--:--</span>
                        <span class="chart-hint">ドラッグでパン、ホイールでズーム</span>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="stockChart" role="img" aria-label="株価推移チャート"></canvas>
                </div>
            </section>

            <!-- Loading Indicator -->
            <div class="loading-overlay" id="loadingOverlay">
                <div class="loading-spinner" role="status" aria-label="読み込み中">
                    <div class="spinner"></div>
                    <p class="loading-text">データを読み込んでいます...</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p class="footer-text">
                Stock Price Tracker - Interactive Chart Visualization
                <span class="separator">|</span>
                <span>Powered by Chart.js</span>
            </p>
            <p class="footer-note">
                注: このアプリケーションはデモ用です。実際の市場データではありません。
            </p>
        </div>
    </footer>

    <script src="app.js"></script>
</body>
</html>
